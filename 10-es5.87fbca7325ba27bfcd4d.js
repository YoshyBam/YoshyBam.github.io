function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var o=0;o<e.length;o++){var t=e[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function _createClass(n,e,o){return e&&_defineProperties(n.prototype,e),o&&_defineProperties(n,o),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{PAky:function(n,e,o){"use strict";o.r(e);var t=o("ofXK"),r=o("3Pt+"),i=o("tyNb"),s=o("MCLT"),c=o("fXoL"),a=o("lGQG"),u=o("3y4p");function l(n,e){if(1&n&&(c.Pb(0,"option",16),c.pc(1),c.Ob()),2&n){var o=e.index,t=c.Zb(2);c.cc("value",o),c.Bb(1),c.qc(t.groupList[o].name)}}function g(n,e){if(1&n){var o=c.Qb();c.Pb(0,"div",4),c.Pb(1,"select",15),c.Xb("ngModelChange",(function(n){return c.jc(o),c.Zb().user.group_index=n}))("change",(function(){return c.jc(o),c.Zb().validator()})),c.Pb(2,"option",16),c.pc(3,"None"),c.Ob(),c.oc(4,l,2,2,"option",17),c.Ob(),c.Ob()}if(2&n){var t=c.Zb();c.Bb(1),c.cc("ngModel",t.user.group_index),c.Bb(1),c.cc("value",null),c.Bb(2),c.cc("ngForOf",t.groupList)}}function b(n,e){if(1&n){var o=c.Qb();c.Pb(0,"div",4),c.Pb(1,"input",18),c.Xb("ngModelChange",(function(n){return c.jc(o),c.Zb().user.name=n})),c.Ob(),c.Ob()}if(2&n){var t=c.Zb();c.Bb(1),c.cc("ngModel",t.user.name)}}function d(n,e){if(1&n){var o=c.Qb();c.Pb(0,"div",4),c.Pb(1,"input",19),c.Xb("ngModelChange",(function(n){return c.jc(o),c.Zb().user.surname=n})),c.Ob(),c.Ob()}if(2&n){var t=c.Zb();c.Bb(1),c.cc("ngModel",t.user.surname)}}function p(n,e){if(1&n){var o=c.Qb();c.Pb(0,"div",4),c.Pb(1,"input",20),c.Xb("ngModelChange",(function(n){return c.jc(o),c.Zb().user.confirm_password=n})),c.Ob(),c.Ob()}if(2&n){var t=c.Zb();c.Bb(1),c.cc("ngModel",t.user.confirm_password)}}var f,h,_=function(n){return{disapear:n}},x=[{path:"",component:(f=function(){function n(e,o,t){var r=this;_classCallCheck(this,n),this.authService=e,this.student=o,this.router=t,this.forgot=!1,this.sign_up=!1,this.username_text="username",this.login_text="Login",this.forgot_text="Forgot password?",this.sign_up_text="Sign up",this.user={group_index:null,name:null,surname:null,username:null,password:null,confirm_password:null};var i=localStorage.getItem("refreshToken");Object(s.isNullOrUndefined)(i)||(this.timer=setInterval((function(){return r.authService.refreshSession(i)}),3e5)),this.groupList=new Array,this.student.getGroupList()}return _createClass(n,[{key:"ngOnInit",value:function(){var n=this;this.user_login_subscription=this.authService.user_login_subject.subscribe({next:function(e){Object(s.isNullOrUndefined)(e.error)?(n.authService.access_token=e.tokens.access_token,n.authService.refresh_token=e.tokens.refresh_token,localStorage.setItem("accessToken",e.tokens.access_token.toString()),localStorage.setItem("refreshToken",e.tokens.refresh_token.toString()),n.authService.user={id:e.user.id,academic_group_id:e.user.academic_group_id,name:e.user.name,surname:e.user.surname,role:e.user.role},console.log(e),n.router.navigate(["/"])):console.log("Error in Login:",e)}}),this.user_create_subscription=this.authService.user_create_subject.subscribe({next:function(n){null!=n.error?console.log("Error in user creation:",n):console.log("Response from creation:",n)}}),this.getGroupListSubscription=this.student.getAcademicGroupListSubject.subscribe({next:function(e){Object(s.isNullOrUndefined)(e.error)?n.groupList=e:console.log(e)}}),this.refreshSessionSubscription=this.authService.refreshSessionSubject.subscribe({next:function(e){Object(s.isNullOrUndefined)(e.error)?(console.log(e),n.authService.access_token=e.tokens.access_token,n.authService.refresh_token=e.tokens.refresh_token,localStorage.setItem("accessToken",e.tokens.access_token.toString()),localStorage.setItem("refreshToken",e.tokens.refresh_token.toString()),n.authService.user={id:e.user.id,academic_group_id:e.user.academic_group_id,name:e.user.name,surname:e.user.surname,role:e.user.role}):(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),n.router.navigate(["/login"]))}})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timer),this.user_login_subscription.unsubscribe(),this.user_create_subscription.unsubscribe(),this.getGroupListSubscription.unsubscribe(),this.refreshSessionSubscription.unsubscribe()}},{key:"validator",value:function(){null!=this.user.group_index&&"null"==this.user.group_index.toString()&&(this.user.group_index=null)}},{key:"gate",value:function(){this.forgot||(this.sign_up?this.authService.user_create(this.user.username,this.user.password,this.user.confirm_password,this.user.name,this.user.surname,this.groupList[this.user.group_index].id):this.authService.user_login(this.user.username,this.user.password))}},{key:"return_to_login",value:function(){this.forgot=!1,this.sign_up=!1,this.username_text="username",this.login_text="Login"}},{key:"signUp_button",value:function(){this.sign_up?this.return_to_login():(this.return_to_login(),this.sign_up=!0,this.username_text="enter KTU email",this.login_text="Sign up",this.sign_up_text="Login")}},{key:"forgot_button",value:function(){this.forgot?this.return_to_login():(this.return_to_login(),this.forgot=!0,this.username_text="enter email",this.login_text="send",this.forgot_text="Login")}}]),n}(),f.\u0275fac=function(n){return new(n||f)(c.Mb(a.a),c.Mb(u.a),c.Mb(i.b))},f.\u0275cmp=c.Gb({type:f,selectors:[["app-login"]],decls:25,vars:13,consts:[[1,"container-fluid"],[1,"row","d-flex","justify-content-center","align-content-center",2,"min-height","100%"],[1,"box"],[1,"row"],[1,"col-12","d-flex","justify-content-center"],["class","col-12 d-flex justify-content-center",4,"ngIf"],["type","text",3,"placeholder","ngModel","ngModelChange"],[1,"col-12","d-flex","justify-content-center",3,"ngClass"],["type","password","placeholder","password",3,"ngModel","ngModelChange"],[1,"login-shadow"],[3,"click"],[1,"col-12"],[1,"col-6",2,"padding-left","10px"],[2,"cursor","pointer",3,"click"],[1,"col-6","d-flex","justify-content-end",2,"padding-right","10px"],[1,"form-control","shadow-none",3,"ngModel","ngModelChange","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","name",3,"ngModel","ngModelChange"],["type","text","placeholder","surname",3,"ngModel","ngModelChange"],["type","password","placeholder","confirm password",3,"ngModel","ngModelChange"]],template:function(n,e){1&n&&(c.Pb(0,"div",0),c.Pb(1,"div",1),c.Pb(2,"div",2),c.Pb(3,"div",3),c.Nb(4,"div",4),c.oc(5,g,5,3,"div",5),c.oc(6,b,2,1,"div",5),c.oc(7,d,2,1,"div",5),c.Pb(8,"div",4),c.Pb(9,"input",6),c.Xb("ngModelChange",(function(n){return e.user.username=n})),c.Ob(),c.Ob(),c.Pb(10,"div",7),c.Pb(11,"input",8),c.Xb("ngModelChange",(function(n){return e.user.password=n})),c.Ob(),c.Ob(),c.oc(12,p,2,1,"div",5),c.Pb(13,"div",4),c.Pb(14,"div",9),c.Pb(15,"button",10),c.Xb("click",(function(){return e.gate()})),c.pc(16),c.Ob(),c.Ob(),c.Ob(),c.Pb(17,"div",11),c.Pb(18,"div",3),c.Pb(19,"div",12),c.Pb(20,"a",13),c.Xb("click",(function(){return e.forgot_button()})),c.pc(21),c.Ob(),c.Ob(),c.Pb(22,"div",14),c.Pb(23,"a",13),c.Xb("click",(function(){return e.signUp_button()})),c.pc(24),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&n&&(c.Bb(5),c.cc("ngIf",e.sign_up),c.Bb(1),c.cc("ngIf",e.sign_up),c.Bb(1),c.cc("ngIf",e.sign_up),c.Bb(2),c.dc("placeholder",e.username_text),c.cc("ngModel",e.user.username),c.Bb(1),c.cc("ngClass",c.fc(11,_,e.forgot)),c.Bb(1),c.cc("ngModel",e.user.password),c.Bb(1),c.cc("ngIf",e.sign_up),c.Bb(4),c.qc(e.login_text),c.Bb(5),c.qc(e.forgot_text),c.Bb(3),c.qc(e.sign_up_text))},directives:[t.j,r.b,r.d,r.e,t.h,r.g,r.f,r.h,t.i],styles:["*[_ngcontent-%COMP%]{outline:none}.container-fluid[_ngcontent-%COMP%]{width:100vw;height:100vh;background-image:url(/assets/images/login-logo.jpg);background-size:cover;background-repeat:no-repeat;background-position-x:center;background-position-y:bottom}.box[_ngcontent-%COMP%]{background:-webkit-gradient(linear,left top,left bottom,color-stop(35%,rgba(75,158,193,.65)),color-stop(85%,hsla(0,0%,93.3%,.75)));background:linear-gradient(rgba(75,158,193,.65) 35%,hsla(0,0%,93.3%,.75) 85%);min-height:200px;max-height:100%;min-width:250px;max-width:450px;border-radius:4px;border:none;padding:25px;margin:auto 0;box-shadow:0 0 3px 1px rgba(52,52,52,.2)}.box[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{padding-top:20px}.box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80%;font-size:1.25em;padding:2px 5px;border:none;text-align:center;background-color:transparent;box-shadow:inset 0 0 0 2px #fff;color:#fff;border-radius:4px}.box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#fff}.box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:#fff}.box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{-webkit-animation-name:border-cover;animation-name:border-cover;-webkit-animation-duration:.8s;animation-duration:.8s;box-shadow:inset 0 0 0 2px hsla(0,0%,80.4%,.8);color:hsla(0,0%,100%,.8)}.box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{color:hsla(0,0%,100%,.8)}.box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus::-moz-placeholder{color:hsla(0,0%,100%,.8)}.box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus::-ms-input-placeholder{color:hsla(0,0%,100%,.8)}.box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus::placeholder{color:hsla(0,0%,100%,.8)}.box[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding:0;margin:0}.box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:80%;font-size:1.25em;padding:2px 5px;border:2px solid #fff;text-align:center;background-color:transparent;box-shadow:inset 0 0 0 2px #fff;color:#fff;border-radius:4px}.box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#2e2e2e}.box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#fff}.box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::-ms-input-placeholder{color:#fff}.box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#fff}.box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{-webkit-animation-name:select-cover;animation-name:select-cover;-webkit-animation-duration:.8s;animation-duration:.8s;border:2px solid #cdcdcd;color:hsla(0,0%,100%,.8)}.box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{color:hsla(0,0%,100%,.8)}.box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus::-moz-placeholder{color:hsla(0,0%,100%,.8)}.box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus::-ms-input-placeholder{color:hsla(0,0%,100%,.8)}.box[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus::placeholder{color:hsla(0,0%,100%,.8)}.box[_ngcontent-%COMP%]   .login-shadow[_ngcontent-%COMP%]{width:40%;max-width:150px;box-shadow:2px 2px 2px 2px rgba(52,52,52,.25),1px 1px 1px 1px rgba(52,52,52,.5);border-radius:2px}.box[_ngcontent-%COMP%]   .login-shadow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-size:1.1em;border:none;border-radius:2px;box-shadow:0 0 0 2px rgba(52,52,52,.45);color:rgba(52,52,52,.65);background-color:transparent}.box[_ngcontent-%COMP%]   .login-shadow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 2px rgba(52,52,52,.25);background:linear-gradient(155deg,rgba(103,151,130,.65),rgba(70,99,101,.65));color:#dfdfdf;-webkit-animation-name:button-cover;animation-name:button-cover;-webkit-animation-duration:.4s;animation-duration:.4s}.box[_ngcontent-%COMP%]   .login-shadow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{outline:none}.box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:rgba(0,0,0,.8);font-weight:400}.disapear[_ngcontent-%COMP%]{-webkit-animation-name:disapear;animation-name:disapear;-webkit-animation-duration:.4s;animation-duration:.4s;display:none;opacity:0;height:0}@-webkit-keyframes disapear{0%{opacity:1}50%{opacity:.5;height:10px}to{opacity:0;height:0;display:none}}@keyframes disapear{0%{opacity:1}50%{opacity:.5;height:10px}to{opacity:0;height:0;display:none}}@-webkit-keyframes border-cover{0%{box-shadow:inset 0 0 0 2px hsla(0,0%,100%,.8);color:#fff}to{box-shadow:inset 0 0 0 2px hsla(0,0%,80.4%,.8);color:hsla(0,0%,100%,.8)}}@keyframes border-cover{0%{box-shadow:inset 0 0 0 2px hsla(0,0%,100%,.8);color:#fff}to{box-shadow:inset 0 0 0 2px hsla(0,0%,80.4%,.8);color:hsla(0,0%,100%,.8)}}@-webkit-keyframes select-cover{0%{border:2px solid #fff;color:#fff}to{border:2px solid #cdcdcd;color:hsla(0,0%,100%,.8)}}@keyframes select-cover{0%{border:2px solid #fff;color:#fff}to{border:2px solid #cdcdcd;color:hsla(0,0%,100%,.8)}}@-webkit-keyframes button-cover{0%{box-shadow:0 0 0 2px rgba(52,52,52,.45);color:rgba(52,52,52,.65);background-color:transparent}to{box-shadow:0 0 0 2px rgba(52,52,52,.25);background:linear-gradient(155deg,rgba(103,151,130,.65),rgba(70,99,101,.65));color:#dfdfdf}}@keyframes button-cover{0%{box-shadow:0 0 0 2px rgba(52,52,52,.45);color:rgba(52,52,52,.65);background-color:transparent}to{box-shadow:0 0 0 2px rgba(52,52,52,.25);background:linear-gradient(155deg,rgba(103,151,130,.65),rgba(70,99,101,.65));color:#dfdfdf}}"]}),f)}],m=((h=function n(){_classCallCheck(this,n)}).\u0275mod=c.Kb({type:h}),h.\u0275inj=c.Jb({factory:function(n){return new(n||h)},imports:[[i.d.forChild(x)],i.d]}),h);o.d(e,"LoginModule",(function(){return P}));var O,P=((O=function n(){_classCallCheck(this,n)}).\u0275mod=c.Kb({type:O}),O.\u0275inj=c.Jb({factory:function(n){return new(n||O)},imports:[[t.b,r.c,m]]}),O)}}]);